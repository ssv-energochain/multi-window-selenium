# Multi-Browser Launcher

Скрипт для открытия нескольких независимых окон браузера с помощью Selenium.

## Возможности

- Открытие нескольких независимых окон браузера одновременно
- Поддержка Chrome и Firefox
- Автоматическое открытие в полноэкранном режиме
- Изолированные профили Chrome для каждого окна (клонирование базового профиля)
- Автоматическая установка расширений для Firefox
- Настройка через командную строку или прямо в коде
- Автоматическая очистка временных профилей при закрытии

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что у вас установлены браузеры Chrome и/или Firefox

3. Для Chrome: подготовьте базовый профиль в папке `chrome_profile/` (опционально, если нужны расширения/настройки)

4. Для Firefox: поместите расширения в формате `.xpi` в папку `extensions/`

## Использование

### Способ 1: Через командную строку

#### Базовое использование:
```bash
python main.py
```
Запустит с настройками по умолчанию (2 окна Chrome, открывает URL по умолчанию).

#### С параметрами:
```bash
python main.py -u https://example.com -c 3 -b chrome
```

#### Параметры командной строки:

- `-u, --url` - URL для открытия (по умолчанию: `https://www.google.com/`)
- `-c, --count` - Количество окон (по умолчанию: `2`)
- `-b, --browser` - Тип браузера: `chrome` или `firefox` (по умолчанию: `chrome`)

#### Примеры:

```bash
# Открыть 5 окон Chrome с указанным сайтом
python main.py -u https://example.com -c 5 -b chrome

# Открыть 3 окна Firefox
python main.py -u https://example.com -c 3 -b firefox

# Короткая форма записи
python main.py -u https://yandex.ru -c 2 -b chrome
```

### Способ 2: Изменение настроек по умолчанию в коде

Откройте файл `main.py` и измените значения в строках 18-21:

```python
# ========== НАСТРОЙКИ ПО УМОЛЧАНИЮ (можно изменить здесь) ==========
DEFAULT_URL = "https://www.google.com/"
DEFAULT_WINDOWS_COUNT = 2
DEFAULT_BROWSER = "chrome"
# ====================================================================
```

Например:
```python
DEFAULT_URL = "https://example.com"
DEFAULT_WINDOWS_COUNT = 5
DEFAULT_BROWSER = "firefox"
```

После этого просто запустите:
```bash
python main.py
```

## Настройка расширений

### Для Chrome:

1. Подготовьте базовый профиль Chrome с нужными расширениями и настройками
2. Поместите его в папку `chrome_profile/` в корне проекта
3. Скрипт автоматически создаст изолированные копии этого профиля для каждого окна

**Важно:** 
- Базовый профиль должен содержать все необходимые расширения и настройки
- Каждое окно получит свою независимую копию профиля в папке `chrome_profile_clones/`
- Временные профили автоматически удаляются при закрытии окон

### Для Firefox:

1. Поместите файлы расширений в формате `.xpi` в папку `extensions/`
2. По умолчанию используется расширение `extensions/cryptopro.xpi`
3. Для изменения списка расширений отредактируйте функцию `create_firefox_driver()` в `main.py`:

```python
firefox_extensions = [
    os.path.abspath(os.path.join(os.path.dirname(__file__), "extensions", "cryptopro.xpi")),
    # Добавьте другие расширения здесь
]
```

## Структура проекта

```
multi-browser/
├── main.py                    # Основной скрипт
├── requirements.txt           # Зависимости Python
├── README.md                  # Документация
├── chrome_profile/            # Базовый профиль Chrome (опционально)
│   └── Default/              # Настройки и расширения Chrome
├── chrome_profile_clones/     # Временные копии профилей (создаются автоматически)
└── extensions/                # Папка с расширениями браузеров
    ├── cryptopro.xpi         # Расширение для Firefox
    └── cryptopro.crx         # Расширение для Chrome (если нужно)
```

## Особенности работы

### Chrome:
- Каждое окно использует изолированную копию базового профиля
- Копии создаются в папке `chrome_profile_clones/` с уникальными именами
- Автоматически удаляются lock-файлы (SingletonLock, SingletonCookie и др.) для параллельной работы
- Временные профили автоматически удаляются при закрытии всех окон

### Firefox:
- Расширения устанавливаются автоматически при запуске
- Каждое окно работает независимо
- Расширения устанавливаются как временные (temporary=True)

### Общее:
- Все окна открываются в полноэкранном режиме (maximized)
- После открытия всех окон скрипт ждет нажатия Enter для закрытия всех окон
- WebDriver Manager автоматически скачивает и управляет драйверами браузеров
- При ошибке открытия окна временные профили Chrome автоматически очищаются

## Требования

- Python 3.7+
- Selenium >= 4.15.0
- webdriver-manager >= 4.0.0
- Chrome или Firefox браузер

## Примечания

- При первом запуске webdriver-manager автоматически скачает драйверы браузеров
- Если расширение Firefox не найдено, скрипт выдаст ошибку и остановится
- Для закрытия всех окон нажмите Enter в консоли (или Ctrl+C)
- Временные профили Chrome в `chrome_profile_clones/` удаляются автоматически, но могут остаться при аварийном завершении
- Базовый профиль Chrome (`chrome_profile/`) не изменяется и не удаляется

